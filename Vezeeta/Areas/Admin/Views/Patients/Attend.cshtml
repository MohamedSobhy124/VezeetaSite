@model IEnumerable<Vezeeta.Models.Appointment>

@{
    ViewBag.Title = "Attend";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<h2>Attendance</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Patient.Name)
        </th>
        <th>
            @Html.DisplayName(" Attending More Than Tree Or Not")
        </th>
        <th></th>
       
    </tr>

@foreach (var item in Model.GroupBy(a=>a.Patient.Name, (key, items) => new { patienName = key, IsAtend = items.Count(u => u.IsAttend == Vezeeta.Models.AppointmentStatus.Denied)>=3 }))
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.patienName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsAtend)
        </td>
        <td>
            @Html.ActionLink("Delete", "Delete2", "Patients", new { id = item.patienName },null)
        </td>
        @*<td>
            @Html.DisplayFor(modelItem => item.Status)
        </td>*@
        @*<td>
            @Html.DisplayFor(modelItem => item.Date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Time)
        </td>
        <td>*@
            @{
//foreach (var i in Model.Where(a=>a.PatientID==item.PatientID).ToList())
//{
//    Html.DisplayFor(modelItem =>i.IsAttend);
//}
    }
            @*@Html.DisplayFor(modelItem => item.IsAttend)*@
        @*</td>*@
       
    </tr>
}

</table>
